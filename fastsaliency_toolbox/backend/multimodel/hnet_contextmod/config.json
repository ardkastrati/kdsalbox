{
    "type": "contextmod",
    "gpu": 0,

    "model": {
        "task_cnt": 7,
        "hnet_hidden_layers": [128, 128, 64],
        "hnet_embedding_size": 16,
        "decoder_non_linearity": "LeakyReLU"
    },

    "experiment": {
        "skip": [],

        "name": "NA",
        "description": "Hypernetwork that learns the weights of ContextModulation layers",

        "logging_dir": "logs/experiment_logs/",
        "verbose": true
    },

    "train": {
        "tasks": ["BMS", "AIM", "IKN", "GBVS", "IMSIG", "RARE2012", "SUN"],

        "input_images_train": "./dataset/dummy_images/train/",
        "imgs_per_task_train": 1500,
        "input_images_val": "./dataset/dummy_images/val/",
        "imgs_per_task_val": 750,
        "input_images_run": "./dataset/dummy_images/run/",
        "input_saliencies": "./dataset/dummy_saliency/",
        "recursive": false,
        
        "batch_size": 4,
        "epochs": 40,
        "lr": 0.01,
        "lr_decay": 0.1,
        "freeze_encoder_steps": 5,
        
        "export_path": "exported/",
        "auto_checkpoint_steps": 5,
        
        "logging_dir": "./logs/train_logs/",
        "verbose": true
    },

    "test": {
        "tasks": ["BMS", "AIM", "IKN", "GBVS", "IMSIG", "RARE2012", "SUN"],

        "input_images_test": "./dataset/dummy_images/train/",
        "imgs_per_task_test": 750,
        "input_saliencies": "./dataset/dummy_saliency/",
        "recursive": false,

        "model_path": "models/example.pth",
        
        "batch_size": 1,
        "per_image_statistics": true,
        
        "logging_dir": "./logs/test_logs/",
        "verbose": true
    },

    "run": {
        "tasks": ["BMS", "AIM", "IKN", "GBVS", "IMSIG", "RARE2012", "SUN"],

        "input_images_run": "./dataset/dummy_images/train/",
        "recursive": false,
        "overwrite": false,
        
        "model_path": "models/example.pth",
        
        "logging_dir": "./logs/run_logs/",
        "verbose": true
    },

    "preprocess": {
        "histogram_matching": {
            "default": "none",
            "description": "Specification for histogram matching. ",
            "valid_values": ["equalization", "image-based", "biased", "none"]
        },
        "histogram_matching_bias_path": {
            "default": "./dataset/mean.jpg",
            "description": "A saliency map to be used for histogram matching ",
            "valid_values": "A directory to the image that represents the bias"
        },
        "histogram_matching_image_path": {
            "default": "../dataset/DATASET/",
            "description": "A saliency map to be used for histogram matching for each image",
            "valid_values": "A directory to all images"
        },
        "do_smoothing": {
            "default": "none",
            "description": "Specification for preprocessing smoothing. 'default' uses whatever smoothing step is provided by the originally released model code. 'none' turns off post-processing smoothing (though it should be noted that some implicit smoothing (eg. through image resizing) will remain). 'custom' smooths the map with a specified kernel 'proportional' smooths the map with a kernel sized to the major dimension of the image.",
            "valid_values": ["default", "none", "custom", "proportional"]
        },
        "smooth_size": {
            "default": 9.0,
            "description": "Custom smoothing kernel size, only used when do_smoothing is set to custom.",
            "valid_values": "Integer greater than 0"
        },
        "smooth_std": {
            "default": 3.0,
            "description": "Custom smoothing kernel standard deviation, only used when do_smoothing is set to custom.",
            "valid_values": "Number greater than 0"
        },
        "smooth_prop": {
            "default": 0.05,
            "description": "Proportional smoothing kernel parameter, only used when do_smoothing is set to proportional. smooth_prop*max(image_height,image_width) is the standard deviation of a Gaussian kernel; size is set to 3 times this value.",
            "valid_values": "Number between 0 and 1"
        },
        "scale_output": {
            "default": "none",
            "description": "Specification for rescaling saliency map values into a specified range. 'log-density' transforms the map to a probability density in log-space, as expected by the Information Gain metric. 'min-max' linearly rescales the values between a specified minimum and maximum. 'none' leaves the output in whatever range is dictated by the original model code 'normalized' returns normally distributed values with mean 0 and standard deviation 1.",
            "valid_values": ["log-density", "min-max", "none", "normalized"]
        },
        "scale_min": {
            "default": 0.0,
            "description": "Minimum saliency value in the map, only valid when scale_output is set to min-max or log-density.",
            "valid_values": "Any number less than scale_max"
        },
        "scale_max": {
            "default": 1.0,
            "description": "Maximum saliency value in the map, only valid when scale_output is set to min-max or log-density.",
            "valid_values": "Any number greater than scale_min"
        },
        "center_prior": {
            "default": "none",
            "description": "Specification for the addition of a priori bias toward the center, usually through the post-processing application of a centered Gaussian, but sometimes built into a model in other ways. Note that this option cannot guarantee to control all forms of spatial bias toward the center, but rather provides control over any parametric or explicit steps which contribute to such a spatial bias. 'default' uses whatever central bias term is automatically provided by a given model, if one is included. 'none' turns off or removes the sources of central biasing which are accessible to SMILER. 'proportional_add' adds a central Gaussian prior with sigma proportional to the image dimensions. 'proportional_mult' multiplies the map by a central Gaussian prior with sigma proportional to the image dimensions.",
            "valid_values": ["default", "none", "proportional_add", "proportional_mult"]
        },
        "center_prior_prop": {
            "default": 0.2,
            "description": "When incorporating a central Gaussian prior, this parameter specifies the sigma of the Gaussian as a proportion of image dimensions. Only used when center_prior is set to proportional_add or proportional_mult.",
            "valid_values": "Number between 0 and 1"
        },
        "center_prior_weight": {
            "default": 0.5,
            "description": "When incorporating a central Gaussian prior, this parameter specifies the weight given to the prior in the form of multiplicative gain. Higher numbers will mean more emphasis is placed on the central prior, whereas lower numbers will place more emphasis on the calculated saliency map. When center_prior is set to proportional_add, the resultant map will be equal to (1-center_prior_weight)*salmap + center_prior_weight*center_prior_map. When center_prior is set to proportional_mult, the resultant map will be equal to (1-center_prior_weight)*salmap + center_prior_weight*salmap*center_prior_map. This parameter is not used in other conditions.",
            "valid_values": "Number greater than 0"
        },
        "center_prior_scale_first": {
            "default": true,
            "description": "When incorporating a central Gaussian prior, this flag tells SMILER to first scale the saliency map to be between 0 and 1 before adding the prior (NOT the scale_output step - this takes place after adding a center prior). After adding the prior SMILER will then do any scaling specified by the scale_output parameter. It is recommended to keep this 'true' to ensure that the magnitude of the center prior is equivalent across algorithms, but this step may be skipped by setting the flag to 'false'.",
            "valid_values": [true, false]
        }
    },
    "postprocess": {
        "histogram_matching": {
            "default": "none",
            "description": "Specification for histogram matching. ",
            "valid_values": ["equalization", "biased", "none"]
        },
        "histogram_matching_bias_path": {
            "default": "./dataset/mean.jpg",
            "description": "A saliency map to be used for histogram matching ",
            "valid_values": "A directory to the image that represents the bias"
        },
        "do_smoothing": {
            "default": "none",
            "description": "Specification for preprocessing smoothing. 'default' uses whatever smoothing step is provided by the originally released model code. 'none' turns off post-processing smoothing (though it should be noted that some implicit smoothing (eg. through image resizing) will remain). 'custom' smooths the map with a specified kernel 'proportional' smooths the map with a kernel sized to the major dimension of the image.",
            "valid_values": ["default", "none", "custom", "proportional"]
        },
        "smooth_size": {
            "default": 9.0,
            "description": "Custom smoothing kernel size, only used when do_smoothing is set to custom.",
            "valid_values": "Integer greater than 0"
        },
        "smooth_std": {
            "default": 3.0,
            "description": "Custom smoothing kernel standard deviation, only used when do_smoothing is set to custom.",
            "valid_values": "Number greater than 0"
        },
        "smooth_prop": {
            "default": 0.05,
            "description": "Proportional smoothing kernel parameter, only used when do_smoothing is set to proportional. smooth_prop*max(image_height,image_width) is the standard deviation of a Gaussian kernel; size is set to 3 times this value.",
            "valid_values": "Number between 0 and 1"
        },
        "scale_output": {
            "default": "none",
            "description": "Specification for rescaling saliency map values into a specified range. 'log-density' transforms the map to a probability density in log-space, as expected by the Information Gain metric. 'min-max' linearly rescales the values between a specified minimum and maximum. 'none' leaves the output in whatever range is dictated by the original model code 'normalized' returns normally distributed values with mean 0 and standard deviation 1.",
            "valid_values": ["log-density", "min-max", "none", "normalized"]
        },
        "scale_min": {
            "default": 0.0,
            "description": "Minimum saliency value in the map, only valid when scale_output is set to min-max or log-density.",
            "valid_values": "Any number less than scale_max"
        },
        "scale_max": {
            "default": 1.0,
            "description": "Maximum saliency value in the map, only valid when scale_output is set to min-max or log-density.",
            "valid_values": "Any number greater than scale_min"
        },
        "center_prior": {
            "default": "none",
            "description": "Specification for the addition of a priori bias toward the center, usually through the post-processing application of a centered Gaussian, but sometimes built into a model in other ways. Note that this option cannot guarantee to control all forms of spatial bias toward the center, but rather provides control over any parametric or explicit steps which contribute to such a spatial bias. 'default' uses whatever central bias term is automatically provided by a given model, if one is included. 'none' turns off or removes the sources of central biasing which are accessible to SMILER. 'proportional_add' adds a central Gaussian prior with sigma proportional to the image dimensions. 'proportional_mult' multiplies the map by a central Gaussian prior with sigma proportional to the image dimensions.",
            "valid_values": ["default", "none", "proportional_add", "proportional_mult"]
        },
        "center_prior_prop": {
            "default": 0.2,
            "description": "When incorporating a central Gaussian prior, this parameter specifies the sigma of the Gaussian as a proportion of image dimensions. Only used when center_prior is set to proportional_add or proportional_mult.",
            "valid_values": "Number between 0 and 1"
        },
        "center_prior_weight": {
            "default": 0.5,
            "description": "When incorporating a central Gaussian prior, this parameter specifies the weight given to the prior in the form of multiplicative gain. Higher numbers will mean more emphasis is placed on the central prior, whereas lower numbers will place more emphasis on the calculated saliency map. When center_prior is set to proportional_add, the resultant map will be equal to (1-center_prior_weight)*salmap + center_prior_weight*center_prior_map. When center_prior is set to proportional_mult, the resultant map will be equal to (1-center_prior_weight)*salmap + center_prior_weight*salmap*center_prior_map. This parameter is not used in other conditions.",
            "valid_values": "Number greater than 0"
        },
        "center_prior_scale_first": {
            "default": true,
            "description": "When incorporating a central Gaussian prior, this flag tells SMILER to first scale the saliency map to be between 0 and 1 before adding the prior (NOT the scale_output step - this takes place after adding a center prior). After adding the prior SMILER will then do any scaling specified by the scale_output parameter. It is recommended to keep this 'true' to ensure that the magnitude of the center prior is equivalent across algorithms, but this step may be skipped by setting the flag to 'false'.",
            "valid_values": [true, false]
        }
    }
}

